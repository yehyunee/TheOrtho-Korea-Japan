<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WEBCEPH 미니 인증 코스 | 한·일 얼라이너 마스터 클래스</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  <!-- HEAD 안쪽 어딘가에 추가 -->
  <script src="https://cdn.portone.io/v2/browser-sdk.js" async defer></script>

</head>
<body class="bg-[url('images/background_pattern.png')] bg-repeat bg-top bg-fixed">
  <!-- Header / Language Dropdown Only -->
  <header class="sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#top" class="flex items-center gap-2 font-semibold">
        <span data-i18n="site_title">WEBCEPH 미니 인증 코스 | 한·일 얼라이너 마스터 클래스</span>
      </a>
      <div class="flex items-center gap-3">
        <!-- Language Dropdown -->
        <label for="langSelect" class="sr-only" data-i18n="choose_language_label">언어 선택</label>
        <div class="relative">
          <select id="langSelect" class="appearance-none pl-3 pr-8 py-2 rounded-lg border text-sm bg-white">
            <option value="ko">한국어</option>
            <option value="ja">日本語</option>
            <option value="en">English</option>
          </select>
          <svg class="pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z" clip-rule="evenodd"/></svg>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section id="top" class="relative overflow-hidden">
    <div class="max-w-6xl mx-auto px-4 py-0 md:py-0 grid md:grid-cols-2 gap-2 items-center">
      <!-- Left: 포스터 슬라이드 -->
      <div id="gallery" class="relative">
        <div class="relative w-full aspect-[3/4] md:aspect-auto md:h-[620px]">
          <div class="swiper absolute inset-0 w-full h-full">
            <div class="swiper-wrapper h-full">
              <div class="swiper-slide h-full flex items-center justify-center bg-black/5">
                <img src="images/poster_ko_1.jpg" alt="Poster 1" class="max-w-full max-h-full w-auto h-auto object-contain block" />
              </div>
              <div class="swiper-slide h-full flex items-center justify-center bg-black/5">
                <img src="images/poster_ko_2.jpg" alt="Poster 2" class="max-w-full max-h-full w-auto h-auto object-contain block" />
              </div>
              <div class="swiper-slide h-full flex items-center justify-center bg-black/5">
                <img src="images/poster_ko_3.jpg" alt="Poster 3" class="max-w-full max-h-full w-auto h-auto object-contain block" />
              </div>
              <div class="swiper-slide h-full flex items-center justify-center bg-black/5">
                <img src="images/poster_ko_4.jpg" alt="Poster 4" class="max-w-full max-h-full w-auto h-auto object-contain block" />
              </div>
            </div>
            <div class="swiper-pagination"></div>
          </div>
        </div>
      </div>

      <!-- Right: 설명/CTA -->
      <div>
        <h1 class="text-2xl md:text-4xl font-extrabold leading-tight mb-4 text-white" data-i18n="hero_title">
          WEBCEPH 미니 인증 코스 <br />한·일 얼라이너 마스터 클래스
        </h1>
        <p class="md:text-lg mb-6 text-slate-100" data-i18n="hero_sub">
          한·일 얼라이너 대표 연자들이 전하는 최신 인사이트와 실전 노하우를 한 자리에서 만나보세요.
        </p>
        <!-- 등록비 안내 -->
        <div class="mb-4 p-3 border rounded-lg bg-slate-50 text-sm text-slate-700">
          <p class="font-semibold" data-i18n="fee_label_general">일반: 100,000원</p>
          <p class="font-semibold mt-1" data-i18n="fee_label_resident">전공의/군의관/공보의: 70,000원</p>
          <p class="text-xs text-slate-500 mt-2" data-i18n="fee_note">결제 완료 후 확인 메일 및 QR 티켓이 발송됩니다.</p>
        </div>
        <div class="flex flex-wrap items-center gap-3 text-sm">
          <button id="showRegisterBtn" class="inline-flex items-center gap-2 px-5 py-3 rounded-xl font-semibold bg-blue-600 text-white" data-i18n="cta_register">
            등록하기
          </button>
          <a href="#program" class="inline-flex items-center gap-2 px-5 py-3 rounded-xl border border-slate-300 hover:border-blue-600 text-white" data-i18n="cta_program">
            프로그램 보기
          </a>
        </div>

      </div>
    </div>
  </section>

  <!-- Event Info -->
  <section id="info" class="bg-white md:max-w-5xl md:mx-auto mx-0 mt-6 md:mt-8 rounded-none md:rounded-2xl md:shadow border border-slate-200">
    <div class="px-6 py-6">
      <!-- <p class="text-xs tracking-widest font-semibold text-slate-500 mb-2" data-i18n="event_info">행사 정보</p> -->
      <div class="grid md:grid-cols-3 gap-4 text-sm">
        <div>
          <div class="text-slate-500" data-i18n="date_label">일시</div>
          <div class="font-semibold" data-i18n="date_value">2025-10-28 (화) 18:30–21:00</div>
        </div>
        <div>
          <div class="text-slate-500" data-i18n="venue_label">장소</div>
          <div class="font-semibold" data-i18n="venue_value">스페이스쉐어 삼성역센터 갤럭시홀</div>
          <div class="font-semibold" data-i18n="venue_address">서울 강남구 영동대로96길 20 지하1층</div>
          <div class="mt-3 flex flex-wrap gap-2">
            <a href="https://maps.google.com/?q=%EC%84%9C%EC%9A%B8%20%EA%B0%95%EB%82%A8%EA%B5%AC%20%EC%98%81%EB%8F%99%EB%8C%80%EB%A1%9C96%EA%B8%B8%2020%20%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4%EC%89%90%EC%96%B4%20%EC%82%BC%EC%84%B1%EC%97%AD%EC%84%BC%ED%84%B0%20%EC%BB%A8%ED%8D%BC%EB%9F%B0%EC%8A%A4%ED%99%80" target="_blank" class="inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-slate-300 text-sm" data-i18n="open_map">
              지도 열기
            </a>
            <!-- <a id="icsBtn" href="#" class="inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm bg-blue-600 text-white" data-i18n="save_ics">
              캘린더 저장 (.ics)
            </a> -->
          </div>
        </div>
        
       <!--  <div>
          <div class="text-slate-500" data-i18n="host_label">주최</div>
          <div class="font-semibold" data-i18n="host_value">WEBCEPH</div>
        </div> -->
        <div>
          <div class="text-slate-500" data-i18n="lang_label">강의 언어</div>
          <div class="font-semibold" data-i18n="lang_value">한글 · 일본어</div>
          <div class="font-semibold" data-i18n="lang_value2">일본어 강좌는 보조스크린을 통해 실시간 한글 통역이 제공될 예정입니다.</div>
        </div>
      </div>

    </div>
  </section>

<!-- Register Section (hidden by default) -->
<section id="register" class="hidden bg-white mt-6 rounded-none md:rounded-2xl md:shadow border border-slate-200 md:max-w-5xl md:mx-auto mx-0 my-0 md:my-8 px-4 md:px-0">
  <div class="py-5 md:p-8">
    <h2 class="text-xl md:text-2xl font-bold mb-4" data-i18n="register_title">등록 정보</h2>

    <!-- 등록비 안내 -->
    <!-- <div class="mb-4 p-3 border rounded-lg bg-slate-50 text-sm text-slate-700">
      <p class="font-semibold" data-i18n="fee_label_general">일반: 100,000원</p>
      <p class="font-semibold mt-1" data-i18n="fee_label_resident">전공의/군의관/공보의: 70,000원</p>
      <p class="text-xs text-slate-500 mt-2" data-i18n="fee_note">결제 완료 후 확인 메일 및 QR 티켓이 발송됩니다.</p>
    </div> -->

    <form id="fastForm" class="space-y-3" onsubmit="return false;">


      <input name="name" type="text" data-i18n-placeholder="ph_name" placeholder="이름" required class="w-full border rounded-lg p-3" />
      <input name="email" type="email" data-i18n-placeholder="ph_email" placeholder="이메일" required class="w-full border rounded-lg p-3" />
      <input name="phone" type="tel" data-i18n-placeholder="ph_phone" placeholder="전화번호" required class="w-full border rounded-lg p-3" />

      <!-- 수강 구분 선택 -->
      <select id="feeTier" name="feeTier" class="w-full border rounded-lg p-3" required>
        <option value="general" data-i18n="opt_general">일반의(전문의)</option>
        <option value="resident" data-i18n="opt_resident">전공의/군의관/공보의</option>
      </select>


      <input name="affiliation" type="text" data-i18n-placeholder="ph_affiliation" placeholder="소속 (선택)" class="w-full border rounded-lg p-3" />
      <div class="flex items-center gap-2 text-xs text-slate-600">
        <input id="agree" type="checkbox" class="h-4 w-4" required />
        <label for="agree" data-i18n="consent">개인정보 수집·이용에 동의합니다.</label>
      </div>

      <div class="grid grid-cols-1 gap-2 pt-2">
        <button id="btnIamport" type="button" class="px-4 py-3 rounded-lg font-semibold bg-blue-600 text-white" data-i18n="btn_iamport">
          신용카드 결제
        </button>
        <!-- <button id="btnPaypal" type="button" class="px-4 py-3 rounded-lg font-semibold border border-slate-300" data-i18n="btn_paypal">
          페이팔 결제
        </button> -->
      </div>

      <div class="mt-4 p-3 border rounded-lg bg-slate-50 text-sm text-slate-700">
        <p class="font-semibold" data-i18n="bank_title">무통장 입금 안내 (선택)</p>
        <p data-i18n="bank_info">예금주: ㈜어셈블써클 | 은행: 기업은행 | 계좌: 518-066566-01-040</p>
        <p class="mt-1 text-xs text-slate-500" data-i18n="bank_note">입금 후 등록 확인을 위해 이름/입금자명/전화번호를 등록폼에 정확히 입력해주세요.<br>입금 시 입금자명에 성명(면허번호)으로 기재해주시기 바랍니다.</p>
      </div>

      <div id="resultBox" class="hidden mt-3 p-3 border rounded-lg">
        <p class="font-semibold" data-i18n="pay_received">결제가 접수되었습니다.</p>
        <div id="qrTicket" class="mt-2 flex items-center justify-center h-40"></div>
      </div>
    </form>
  </div>
</section>


<!-- Program -->
<section id="program" class="bg-white md:max-w-5xl md:mx-auto mx-0 mt-6 md:mt-8 rounded-none md:rounded-2xl md:shadow border border-slate-200">
  <div class="p-5">
    <h2 class="text-lg md:text-xl font-bold mb-3" data-i18n="program_title">프로그램</h2>

    <!-- Mobile cards -->
    <div class="md:hidden space-y-3" id="programCards">
      <!-- 18:30 -->
      <div class="p-3 border rounded-lg bg-white">
        <p class="text-xs text-slate-500" data-i18n="slot_1830_time">18:30–18:40</p>
        <p class="text-base md:text-lg font-bold" data-i18n="slot_1830_desc">인사 및 소개</p>
      </div>

      <!-- 18:40 Hiroyuki -->
      <div class="p-3 border rounded-lg bg-white">
        <p class="text-xs text-slate-500" data-i18n="slot_1840_time">18:40–19:10</p>
        <p class="mb-2 text-base md:text-lg font-bold" data-i18n="slot_1840_desc">투명교정 시 추가 얼라이너를 줄이기 위한 전략</p>
        <div class="flex items-center gap-3">
          <img src="images/hiroyuki.PNG" alt="Dr. Hiroyuki Watabe" class="w-20 h-20 rounded-full object-cover">
          <div>
            <p class="text-sm font-semibold" data-i18n="sp1_name">Dr. Hiroyuki Watabe</p>
            <p class="text-[11px] text-slate-500" data-i18n="sp1_bio1">인비절라인 APAC 어워드 수상자</p>
            <p class="text-[11px] text-slate-500" data-i18n="sp1_bio2">인비절라인 패컬티</p>
          </div>
        </div>
      </div>

      <!-- 19:10 Shuichiro & Takao -->
      <div class="p-3 border rounded-lg bg-white">
        <p class="text-xs text-slate-500" data-i18n="slot_1910_time">19:10–19:40</p>
        <p class="mb-2 text-base md:text-lg font-bold" data-i18n="slot_1910_desc">Aligner Radio in Korea</p>
        <!-- Takao -->
        <div class="flex items-center gap-3 mb-3">
          <img src="images/takao.PNG" alt="Dr. Takao Minamidate" class="w-20 h-20 rounded-full object-cover">
          <div>
            <p class="text-sm font-semibold" data-i18n="sp2_name">Dr. Takao Minamidate</p>
            <p class="text-[11px] text-slate-500" data-i18n="sp2_bio1">ALIGNER ORTHO 저자</p>
            <p class="text-[11px] text-slate-500" data-i18n="sp2_bio2">후쿠오카 MA 교정치과</p>
          </div>
        </div>
        <!-- Shuichiro -->
        <div class="flex items-center gap-3">
          <img src="images/shuichiro.PNG" alt="Dr. Shuichiro Okano" class="w-20 h-20 rounded-full object-cover">
          <div>
            <p class="text-sm font-semibold" data-i18n="sp3_name">Dr. Shuichiro Okano</p>
            <p class="text-[11px] text-slate-500" data-i18n="sp3_bio1">ALIGNER ORTHO 저자</p>
            <p class="text-[11px] text-slate-500" data-i18n="sp3_bio2">인비절라인 패컬티</p>
          </div>
        </div>
      </div>

      <!-- 19:40 Q&A -->
      <div class="p-3 border rounded-lg bg-white">
        <p class="text-xs text-slate-500" data-i18n="slot_1940_time">19:40–19:50</p>
        <p class="text-base md:text-lg font-bold" data-i18n="slot_1940_desc">Q&amp;A</p>
      </div>

      <!-- 19:50 Yehyun -->
      <div class="p-3 border rounded-lg bg-white">
        <p class="text-xs text-slate-500" data-i18n="slot_1950_time">19:50–20:20</p>
        <p class="mb-2 text-base md:text-lg font-bold" data-i18n="slot_1950_desc">WEBCEPH 미니 인증 코스</p>
        <div class="flex items-center gap-3">
          <img src="images/yehyun.PNG" alt="Dr. Yehyun Kim" class="w-20 h-20 rounded-full object-cover">
          <div>
            <p class="text-sm font-semibold" data-i18n="sp4_name">Dr. 김예현</p>
            <p class="text-[11px] text-slate-500" data-i18n="sp4_bio1">WEBCEPH 창업자 CEO</p>
            <p class="text-[11px] text-slate-500" data-i18n="sp4_bio2">서울클리어 치과교정과</p>
          </div>
        </div>
      </div>

      <!-- 20:20 Choi -->
      <div class="p-3 border rounded-lg bg-white">
        <p class="text-xs text-slate-500" data-i18n="slot_2020_time">20:20–20:50</p>
        <p class="mb-2 text-base md:text-lg font-bold" data-i18n="slot_2020_desc">투명 교정: 치료계획에서의 난관과 해결책</p>
        <div class="flex items-center gap-3">
          <img src="images/hyungjoo.PNG" alt="Dr. Hyungjoo Choi" class="w-20 h-20 rounded-full object-cover">
          <div>
            <p class="text-sm font-semibold" data-i18n="sp5_name">Dr. 최형주</p>
            <p class="text-[11px] text-slate-500" data-i18n="sp5_bio1">인비절라인 패컬티</p>
            <p class="text-[11px] text-slate-500" data-i18n="sp5_bio2">서울바른 치과교정과</p>
          </div>
        </div>
      </div>

      <!-- 20:50 Closing -->
      <div class="p-3 border rounded-lg bg-white">
        <p class="text-xs text-slate-500" data-i18n="slot_2050_time">20:50–21:00</p>
        <p class="text-base md:text-lg font-bold" data-i18n="slot_2050_desc">Q&amp;A 및 단체 사진 촬영</p>
      </div>
    </div>

    <!-- Desktop table -->
    <div class="hidden md:block overflow-x-auto">
      <table class="w-full border border-slate-200 rounded-2xl overflow-hidden shadow align-middle">
        <thead class="bg-slate-100">
          <tr>
            <th class="px-4 py-2 text-left w-32" data-i18n="th_time">시간</th>
            <th class="px-4 py-2 text-left" data-i18n="th_desc">연제</th>
            <th class="px-4 py-2 text-center w-80">연자</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-200">
          <tr>
            <td class="px-4 py-2" data-i18n="slot_1830_time">18:30–18:40</td>
            <td class="px-4 py-2 align-middle text-base md:text-lg font-bold" data-i18n="slot_1830_desc">인사 및 소개</td>
            <td class="px-4 py-2 text-center"></td>
          </tr>
          <tr>
            <td class="px-4 py-2" data-i18n="slot_1840_time">18:40–19:10</td>
            <td class="px-4 py-2 align-middle text-base md:text-lg font-bold" data-i18n="slot_1840_desc">투명교정 시 추가 얼라이너를 줄이기 위한 전략</td>
            <td class="px-4 py-2 text-center">
              <img src="images/hiroyuki.PNG" alt="Dr. Hiroyuki Watabe" class="w-20 h-20 mx-auto mb-2 rounded-full object-cover">
              <div class="text-sm font-semibold" data-i18n="sp1_name">Dr. Hiroyuki Watabe</div>
              <div class="text-xs text-slate-500" data-i18n="sp1_bio1">인비절라인 APAC 어워드 수상자</div>
              <div class="text-xs text-slate-500" data-i18n="sp1_bio2">인비절라인 패컬티</div>
            </td>
          </tr>
          <tr>
            <td class="px-4 py-2" data-i18n="slot_1910_time">19:10–19:40</td>
            <td class="px-4 py-2 align-middle text-base md:text-lg font-bold" data-i18n="slot_1910_desc">Aligner Radio in Korea</td>
            <td class="px-4 py-2 text-center">
              <div class="flex justify-center gap-6">
                <div>
                  <img src="images/takao.PNG" alt="Dr. Takao Minamidate" class="w-20 h-20 mx-auto mb-2 rounded-full object-cover">
                  <div class="text-sm font-semibold" data-i18n="sp2_name">Dr. Takao Minamidate</div>
                  <div class="text-xs text-slate-500" data-i18n="sp2_bio1">ALIGNER ORTHO 저자</div>
                  <div class="text-xs text-slate-500" data-i18n="sp2_bio2">후쿠오카 MA 교정치과</div>
                </div>
                <div>
                  <img src="images/shuichiro.PNG" alt="Dr. Shuichiro Okano" class="w-20 h-20 mx-auto mb-2 rounded-full object-cover">
                  <div class="text-sm font-semibold" data-i18n="sp3_name">Dr. Shuichiro Okano</div>
                  <div class="text-xs text-slate-500" data-i18n="sp3_bio1">ALIGNER ORTHO 저자</div>
                  <div class="text-xs text-slate-500" data-i18n="sp3_bio2">인비절라인 패컬티</div>
                </div>
              </div>
            </td>
          </tr>
          <tr>
            <td class="px-4 py-2" data-i18n="slot_1940_time">19:40–19:50</td>
            <td class="px-4 py-2 align-middle text-base md:text-lg font-bold" data-i18n="slot_1940_desc">Q&amp;A</td>
            <td class="px-4 py-2 text-center"></td>
          </tr>
          <tr>
            <td class="px-4 py-2" data-i18n="slot_1950_time">19:50–20:20</td>
            <td class="px-4 py-2 align-middle text-base md:text-lg font-bold" data-i18n="slot_1950_desc">WEBCEPH 미니 인증 코스</td>
            <td class="px-4 py-2 text-center">
              <img src="images/yehyun.PNG" alt="Dr. Yehyun Kim" class="w-20 h-20 mx-auto mb-2 rounded-full object-cover">
              <div class="text-sm font-semibold" data-i18n="sp4_name">Dr. 김예현</div>
              <div class="text-xs text-slate-500" data-i18n="sp4_bio1">WEBCEPH 창업자 CEO</div>
              <div class="text-xs text-slate-500" data-i18n="sp4_bio2">서울클리어 치과교정과</div>
            </td>
          </tr>
          <tr>
            <td class="px-4 py-2" data-i18n="slot_2020_time">20:20–20:50</td>
            <td class="px-4 py-2 align-middle text-base md:text-lg font-bold" data-i18n="slot_2020_desc">투명 교정: 치료계획에서의 난관과 해결책</td>
            <td class="px-4 py-2 text-center">
              <img src="images/hyungjoo.PNG" alt="Dr. Hyungjoo Choi" class="w-20 h-20 mx-auto mb-2 rounded-full object-cover">
              <div class="text-sm font-semibold" data-i18n="sp5_name">Dr. 최형주</div>
              <div class="text-xs text-slate-500" data-i18n="sp5_bio1">인비절라인 패컬티</div>
              <div class="text-xs text-slate-500" data-i18n="sp5_bio2">서울바른 치과교정과</div>
            </td>
          </tr>
          <tr>
            <td class="px-4 py-2" data-i18n="slot_2050_time">20:50–21:00</td>
            <td class="px-4 py-2 align-middle text-base md:text-lg font-bold" data-i18n="slot_2050_desc">Q&amp;A 및 단체 사진 촬영</td>
            <td class="px-4 py-2 text-center"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

  <p class="mt-3 pt-5 text-center text-white"><span data-i18n="contact">문의</span>: <a href="mailto:admin@assemblecircle.com">admin@assemblecircle.com</a></p>

  <footer class="pt-5 pb-10">
    <div class="max-w-6xl text-center mx-auto text-white px-4 text-sm text-slate-500" data-i18n="footer">© 2025 WEBCEPH. All rights reserved.</div>
  </footer>

  <style>
    @media (min-width: 768px) {
      .md\:text-4xl { font-size: 2.25rem; line-height: 3.5rem; }
    }
  </style>

  <script>
    // Swiper init
    new Swiper('.swiper', {
      loop: true,
      slidesPerView: 1,
      spaceBetween: 12,
      pagination: { el: '.swiper-pagination', clickable: true },
    });

    // Toggle register panel
    document.getElementById('showRegisterBtn')?.addEventListener('click', () => {
      const reg = document.getElementById('register');
      reg.classList.toggle('hidden');
      if (!reg.classList.contains('hidden')) reg.scrollIntoView({ behavior: 'smooth' });
    });

       // ===== 금액 매핑 =====
      const PRICES = {
        general: 100000,   // 일반
        resident: 70000    // 전공의/군의관/공보의
      };

      // ===== 메타 =====
      const PAY_META = {
        name: "세미나 등록비",
        description: "Seminar Registration Fee"
      };

      // ===== 폼 값 수집 =====
      function getFormValues() {
        const form = document.getElementById('fastForm');
        return {
          tier: (document.getElementById('feeTier').value || 'general'),
          name: form.name.value.trim(),
          email: form.email.value.trim(),
          phone: form.phone.value.trim(),
          affiliation: form.affiliation.value.trim(),
          agree: document.getElementById('agree').checked
        };
      }

      function getAmountKRW(tier) {
        return PRICES[tier] ?? PRICES.general;
      }

      // ===== PortOne SDK 로드 대기 =====
      function waitPortOne(timeoutMs = 8000) {
        return new Promise((resolve, reject) => {
          const deadline = Date.now() + timeoutMs;
          (function tick(){
            if (window.PortOne) return resolve();
            if (Date.now() > deadline) return reject(new Error("PortOne SDK not loaded"));
            requestAnimationFrame(tick);
          })();
        });
      }

      // ===== 버튼 busy 토글 =====
      function setBusy(btnId, isBusy) {
        const btn = document.getElementById(btnId);
        if (!btn) return;
        btn.setAttribute('aria-busy', String(isBusy));
        btn.disabled = isBusy;
      }

      // ===== PortOne 결제 =====
      async function payWithIamport() {
        const v = getFormValues();
        if (!v.agree) {
          alert(i18nStr('must_agree') || "개인정보 수집·이용에 동의해 주세요.");
          return;
        }
        // 필수 입력값 확인 (미입력 시 alert 후 중단)
        if (!v.name) {
          alert(i18nStr?.('err_name') || "이름을 입력해 주세요.");
          return;
        }
        if (!v.email) {
          alert(i18nStr?.('err_email') || "이메일을 입력해 주세요.");
          return;
        }
        if (!v.phone) {
          alert(i18nStr?.('err_phone') || "전화번호를 입력해 주세요.");
          return;
        }
        const amount = getAmountKRW(v.tier);
        const orderName = ("WEBCEPH 미니 인증 코스")
                        + " - " + (v.tier === 'general'
                          ? ('일반')
                          : ('전공의'));

        setBusy('btnIamport', true);
        try {
          await waitPortOne();

          // 랜덤 paymentId
          const paymentId = [...crypto.getRandomValues(new Uint32Array(2))]
            .map((w) => w.toString(16).padStart(8, '0')).join('');

          const payment = await PortOne.requestPayment({
            storeId: "store-8301c517-b238-4765-9b21-10f0cee1d025",            // TODO: 실제 storeId로 교체
            channelKey: "channel-key-b2a1da27-11c7-4836-ba00-cb6967531eed",   // TODO: 실제 channelKey로 교체
            paymentId,
            orderName,
            totalAmount: amount,
            currency: "KRW",
            payMethod: "CARD",
            redirectUrl: "https://seminar.assemblecircle.com/payment/complete",
            customData: {
              tier: v.tier,
              buyer: { name: v.name, email: v.email, phone: v.phone, affiliation: v.affiliation }
            }
          });

          if (payment.code !== undefined) {
            // 결제 실패
            console.error(payment);
            alert((i18nStr('pay_fail') || "결제 실패: ") + (payment.message || ''));
            return;
          }

          // (권장) 서버 검증
          // await fetch('/api/payment/complete', { method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify({ paymentId: payment.paymentId }) });

          // 성공 UI
          document.getElementById('resultBox').classList.remove('hidden');

        } catch (err) {
          console.error(err);
          alert(i18nStr('imp_load_fail') || "결제 라이브러리를 불러오지 못했습니다.");
        } finally {
          setBusy('btnIamport', false);
        }
      }

      // ===== PayPal 스텁 =====
      async function payWithPaypal() {
        const v = getFormValues();
        if (!v.agree) {
          alert(i18nStr('must_agree') || "개인정보 수집·이용에 동의해 주세요.");
          return;
        }
        const amount = getAmountKRW(v.tier);
        try {
          // 서버에서 PayPal Order 생성 (예시)
          // const res = await fetch('/api/paypal/create-order', {
          //   method: 'POST',
          //   headers: { 'Content-Type': 'application/json' },
          //   body: JSON.stringify({
          //     currency: 'KRW',
          //     amount,
          //     description: PAY_META.description,
          //     buyer: { name: v.name, email: v.email, phone: v.phone, affiliation: v.affiliation },
          //     tier: v.tier
          //   })
          // });
          // const data = await res.json();
          // if (data.approvalUrl) window.location.href = data.approvalUrl;

          alert(`PayPal 결제 시도\n구분: ${v.tier}\n금액: ${amount.toLocaleString()} KRW`);
        } catch (e) {
          console.error(e);
          alert("PayPal 결제 생성 중 오류가 발생했습니다.");
        }
      }

      // ===== 이벤트 바인딩 =====
      document.getElementById('btnIamport')?.addEventListener('click', payWithIamport);
      document.getElementById('btnPaypal')?.addEventListener('click', payWithPaypal);

    // ===== i18n =====
const DICTS = {
  ko: {
    site_title: 'WEBCEPH 미니 인증 코스 | 한·일 얼라이너 마스터 클래스',
    choose_language_label: '언어 선택',
    hero_title: 'WEBCEPH 미니 인증 코스 <br/>한·일 얼라이너 마스터 클래스',
    hero_sub: '한·일 얼라이너 대표 연자들이 전하는 최신 인사이트와 실전 노하우를 한 자리에서 만나보세요.',
    fee_label: '등록비: 100,000원 (부가세 포함)',
    fee_note: '결제 완료 후 확인 메일 및 QR 티켓이 발송됩니다.',
    cta_register: '등록하기',
    cta_program: '프로그램 보기',
    event_info: '행사 정보',
    date_label: '일시',
    date_value: '2025-10-28 (화) 18:30–21:00',
    venue_label: '장소',
    venue_value: '스페이스쉐어 삼성역센터 갤럭시홀',
    host_label: '주최',
    host_value: 'WEBCEPH',
    lang_label: '강의 언어',
    lang_value: '한글 · 일본어',
    lang_value2: '일본어 강좌는 보조스크린을 통해 실시간 한글 통역이 제공될 예정입니다.',
    open_map: '지도 열기',
    save_ics: '캘린더 저장 (.ics)',
    register_title: '등록 정보',
    ph_name: '이름', ph_email: '이메일', ph_phone: '전화번호', ph_affiliation: '소속 (선택)',
    consent: '개인정보 수집·이용에 동의합니다.',


    btn_iamport: '신용카드 결제', btn_paypal: '페이팔 결제',
    bank_title: '무통장 입금 안내 (선택)',
    bank_info: '예금주: ㈜어셈블써클 | 은행: 기업은행 | 계좌: 518-066566-01-040',
    bank_note: '입금 후 등록 확인을 위해 이름/입금자명/전화번호를 등록폼에 정확히 입력해주세요.<br>입금 시 입금자명에 성명(면허번호)으로 기재해주시기 바랍니다.',
    pay_received: '결제가 접수되었습니다.',
    th_time: '시간', th_desc: '내용',
    slot_1830_time: '18:30–18:40', slot_1830_desc: '인사 및 소개',
    slot_1840_time: '18:40–19:10', slot_1840_desc: '투명교정 시 추가 얼라이너를 줄이기 위한 전략',
    slot_1910_time: '19:10–19:40', slot_1910_desc: 'Aligner Radio in Korea',
    slot_1940_time: '19:40–19:50', slot_1940_desc: 'Q&A',
    slot_1950_time: '19:50–20:20', slot_1950_desc: 'WEBCEPH 미니 인증 코스',
    slot_2020_time: '20:20–20:50', slot_2020_desc: '투명 교정: 치료계획에서의 난관과 해결책',
    slot_2050_time: '20:50–21:00', slot_2050_desc: 'Q&A 및 단체 사진 촬영',
    footer: '© 2025 WEBCEPH. All rights reserved.',
    product_name: 'WEBCEPH 미니 인증 코스',
    must_agree: '개인정보 수집·이용에 동의해야 등록할 수 있습니다.',
    err_name: '이름을 입력해 주세요.',
    err_email: '이메일을 입력해 주세요.',
    err_phone: '전화번호를 입력해 주세요.',
    fill_required: '필수 정보를 입력하세요.',
    imp_load_fail: '결제 라이브러리를 불러오지 못했습니다.',
    pay_success: '결제가 접수되었습니다. (UID: {uid})',
    pay_fail: '결제 실패: ',

    program_title: '프로그램',
    /* === Speakers (names & bios) === */
    sp1_name: 'Dr. Hiroyuki Watabe',
    sp1_bio1: '인비절라인 APAC 어워드 수상자',
    sp1_bio2: '인비절라인 패컬티',

    sp2_name: 'Dr. Takao Minamidate',
    sp2_bio1: 'ALIGNER ORTHO 저자',
    sp2_bio2: '후쿠오카 MA 교정치과',

    sp3_name: 'Dr. Shuichiro Okano',
    sp3_bio1: 'ALIGNER ORTHO 저자',
    sp3_bio2: '인비절라인 패컬티',

    sp4_name: 'Dr. 김예현',
    sp4_bio1: 'WEBCEPH 창업자 CEO',
    sp4_bio2: '서울클리어 치과교정과',

    sp5_name: 'Dr. 최형주',
    sp5_bio1: '인비절라인 패컬티',
    sp5_bio2: '서울바른 치과교정과',
    contact: '문의',

    fee_label_general: "일반: 100,000원",
    fee_label_resident: "전공의/군의관/공보의: 70,000원",
    fee_note: "결제 완료 후 확인 메일 및 QR 티켓이 발송됩니다.",

    opt_general: "일반의(전문의)",
    opt_resident: "전공의/군의관/공보의",

    venue_address: "서울 강남구 영동대로96길 20 지하1층"
  },
  ja: {
    site_title: 'WEBCEPHミニ認定コース | 日韓アライナーマスタークラス',
    choose_language_label: '言語を選択',
    hero_title: 'WEBCEPHミニ認定コース <br/>日韓アライナーマスタークラス',
    hero_sub: '日韓のアライナーの著名講師が最新インサイトと実践ノウハウを一堂に共有します。',
    fee_label: '受講料: 100,000ウォン（税込）',
    fee_note: '決済完了後、確認メールとQRチケットをお送りします。',
    cta_register: '申込する',
    cta_program: 'プログラムを見る',
    event_info: 'イベント情報',
    date_label: '日時',
    date_value: '2025-10-28（火）18:30–21:00',
    venue_label: '会場',
    venue_value: 'スペースシェア三成駅センター コンファレンスホール（ソウル）',
    host_label: '主催',
    host_value: 'WEBCEPH',
    lang_label: '言語',
    lang_value: '韓国語・日本語',
    lang_value2: '日本語講座は韓国語への逐次通訳が提供される予定です。',
    open_map: '地図を開く',
    save_ics: 'カレンダー保存 (.ics)',
    register_title: '申込情報',
    ph_name: '氏名', ph_email: 'メール', ph_phone: '電話番号', ph_affiliation: '所属（任意）',
    consent: '個人情報の収集・利用に同意します。',
    // btn_iamport: 'Iamport 決済', btn_paypal: 'PayPal Express 決済',
    btn_iamport: "韓国クレジットカード決済",
    btn_paypal: "PayPal決済",
    bank_title: '銀行振込のご案内（任意）',
    bank_info: '口座名義: ㈜어셈블써클 | 銀行: IBK(Industrial Bank of Korea) | 口座: 518-066566-01-040',
    bank_note: '入金後の確認のため、氏名／振込名義／電話番号を申込フォームに正確にご記入ください。',
    pay_received: '決済が受け付けられました。',
    th_time: '時間', th_desc: '内容',
    slot_1830_time: '18:30–18:40', slot_1830_desc: '挨拶と紹介',
    slot_1840_time: '18:40–19:10', slot_1840_desc: '追加アライナーを減らすための戦略',
    slot_1910_time: '19:10–19:40', slot_1910_desc: 'Aligner Radio in Korea',
    slot_1940_time: '19:40–19:50', slot_1940_desc: 'Q&A',
    slot_1950_time: '19:50–20:20', slot_1950_desc: 'WEBCEPHミニ認定コース',
    slot_2020_time: '20:20–20:50', slot_2020_desc: '透明矯正：治療計画における課題と解決策',
    slot_2050_time: '20:50–21:00', slot_2050_desc: 'Q&A・集合写真',
    footer: '© 2025 WEBCEPH. All rights reserved.',
    product_name: 'WEBCEPHミニ認定コース',
    must_agree: '申込には個人情報の収集・利用への同意が必要です。',
    fill_required: '必須項目を入力してください。',
    imp_load_fail: '決済ライブラリの読み込みに失敗しました。',
    pay_success: '決済が受け付けられました。（UID: {uid}）',
    pay_fail: '決済失敗: ',


    program_title: '日程表',

    /* === Speakers === */
    sp1_name: 'Dr. Hiroyuki Watabe',
    sp1_bio1: 'インビザラインAPACアワード受賞者',
    sp1_bio2: 'インビザライン ファカルティ',

    sp2_name: 'Dr. Takao Minamidate',
    sp2_bio1: '『ALIGNER ORTHO』著者',
    sp2_bio2: '福岡MA矯正歯科',

    sp3_name: 'Dr. Shuichiro Okano',
    sp3_bio1: '『ALIGNER ORTHO』著者',
    sp3_bio2: 'インビザライン ファカルティ',

    sp4_name: 'Dr. Yehyun Kim',
    sp4_bio1: 'WEBCEPH創業者・CEO',
    sp4_bio2: 'ソウルクリア矯正歯科',

    sp5_name: 'Dr. Hyungjoo Choi',
    sp5_bio1: 'インビザライン ファカルティ',
    sp5_bio2: 'ソウルバルン矯正歯科',
    contact: 'Contact',

    fee_label_general: "一般：100,000ウォン",
    fee_label_resident: "研修医／軍医／公務員医師：70,000ウォン",
    fee_note: "お支払い完了後、確認メールとQRチケットが送信されます。",

    opt_general: "一般",
    opt_resident: "研修医／軍医／公務員医師",


    venue_address: "ソウル特別市 江南区 永東大路96キル20 地下1階",
    err_name: 'お名前をご入力ください。',
    err_email: 'メールアドレスをご入力ください。',
    err_phone: '電話番号をご入力ください。',

    lang_value2: "日本語講座では、サブスクリーンを通じてリアルタイムで韓国語翻訳が提供される予定です。",


  },
  en: {
    site_title: 'WEBCEPH Mini Certification | Korea–Japan Aligner Masterclass',
    choose_language_label: 'Choose language',
    hero_title: 'WEBCEPH Mini Certification <br/>Korea–Japan Aligner Masterclass',
    hero_sub: 'Meet top aligner speakers from Korea and Japan sharing the latest insights and practical know-how in one place.',
    fee_label: 'Registration fee: KRW 100,000 (VAT incl.)',
    fee_note: 'A confirmation email and QR ticket will be sent after payment.',
    cta_register: 'Register',
    cta_program: 'View Program',
    event_info: 'EVENT INFO',
    date_label: 'Date & Time',
    date_value: 'Tue, Oct 28, 2025 • 18:30–21:00',
    venue_label: 'Venue',
    venue_value: 'SPACE SHARE Samseong Center – Conference Hall, Seoul',
    host_label: 'Host',
    host_value: 'WEBCEPH',
    lang_label: 'Languages',
    lang_value: 'Korean · Japanese',
    lang_value2: 'The Japanese lecture will be provided with consecutive interpretation into Korean.',
    open_map: 'Open Map',
    save_ics: 'Save to Calendar (.ics)',
    register_title: 'Registration',
    ph_name: 'Name', ph_email: 'Email', ph_phone: 'Phone number', ph_affiliation: 'Affiliation (optional)',
    consent: 'I agree to the collection and use of my personal information.',
    // btn_iamport: 'Pay with Iamport', btn_paypal: 'Pay with PayPal Express',
    bank_title: 'Bank Transfer (optional)',
    bank_info: 'Account Holder: ㈜어셈블써클 | Bank: IBK(Industrial Bank of Korea) | Account: 518-066566-01-040',
    bank_note: 'After remittance, please enter your name / remitter’s name / phone number accurately in the form for verification.',
    pay_received: 'Payment received.',
    th_time: 'Time', th_desc: 'Details',
    slot_1830_time: '18:30–18:40', slot_1830_desc: 'Opening & Introduction',
    slot_1840_time: '18:40–19:10', slot_1840_desc: 'Strategies to Reduce Additional Aligners',
    slot_1910_time: '19:10–19:40', slot_1910_desc: 'Aligner Radio in Korea',
    slot_1940_time: '19:40–19:50', slot_1940_desc: 'Q&A',
    slot_1950_time: '19:50–20:20', slot_1950_desc: 'WEBCEPH Mini Certification',
    slot_2020_time: '20:20–20:50', slot_2020_desc: 'Clear Aligners: Challenges & Solutions in Treatment Planning',
    slot_2050_time: '20:50–21:00', slot_2050_desc: 'Q&A & Group Photo',
    footer: '© 2025 WEBCEPH. All rights reserved.',
    product_name: 'WEBCEPH Mini Certification',
    must_agree: 'You must agree to the privacy policy to register.',
    fill_required: 'Please fill in the required fields.',
    imp_load_fail: 'Failed to load payment library.',
    pay_success: 'Payment received. (UID: {uid})',
    pay_fail: 'Payment failed: ',
    btn_iamport: "Pay with Korean Credit Card",
    btn_paypal: "Pay with PayPal",


    program_title: 'PROGRAM',

    /* === Speakers === */
    sp1_name: 'Dr. Hiroyuki Watabe',
    sp1_bio1: 'Invisalign APAC Award Winner',
    sp1_bio2: 'Invisalign Faculty',

    sp2_name: 'Dr. Takao Minamidate',
    sp2_bio1: 'Author of ALIGNER ORTHO',
    sp2_bio2: 'Fukuoka MA Orthodontic Clinic',

    sp3_name: 'Dr. Shuichiro Okano',
    sp3_bio1: 'Author of ALIGNER ORTHO',
    sp3_bio2: 'Invisalign Faculty',

    sp4_name: 'Dr. Yehyun Kim',
    sp4_bio1: 'Founder & CEO, WEBCEPH',
    sp4_bio2: 'Seoul Clear Orthodontic Clinic',

    sp5_name: 'Dr. Hyungjoo Choi',
    sp5_bio1: 'Invisalign Faculty',
    sp5_bio2: 'Seoul Barun Orthodontic Clinic',
    contact: 'Contact',

    fee_label_general: "General: 100,000 KRW",
    fee_label_resident: "Resident / Military / Public Health Doctor: 70,000 KRW",
    fee_note: "After payment is completed, a confirmation email and QR ticket will be sent.",

    opt_general: "General",
    opt_resident: "Resident / Military / Public Health Doctor",

    venue_address: "B1, 20, Yeongdong-daero 96-gil, Gangnam-gu, Seoul",
    err_name: 'Please enter your name.',
    err_email: 'Please enter your email address.',
    err_phone: 'Please enter your phone number.',

    lang_value2: "The Japanese lecture will provide real-time Korean translation through a supplementary screen.",
  }
};

// === Poster i18n ===
const LANG_TO_POSTER_CODE = { ko: 'ko', ja: 'jp', en: 'en' };

function updatePosters(lang) {
  const code = LANG_TO_POSTER_CODE[lang] || 'ko';
  // 갤러리 내 슬라이드 이미지를 순서대로 1~4로 교체
  const imgs = document.querySelectorAll('#gallery .swiper-slide img');
  imgs.forEach((img, idx) => {
    img.setAttribute('src', `images/poster_${code}_${idx + 1}.jpg`);
  });
}


    function i18nStr(key) {
      const lang = document.documentElement.lang || 'ko';
      const dict = DICTS[lang] || DICTS.ko;
      return dict[key] ?? DICTS.ko[key] ?? key;
    }

    function applyI18n(lang) {
      document.documentElement.lang = lang;
      // Text nodes
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const val = (DICTS[lang] && DICTS[lang][key]) || (DICTS.ko && DICTS.ko[key]) || '';
        if (val.includes('<br')) el.innerHTML = val; else el.textContent = val;
      });
      // Placeholders
      document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        const val = (DICTS[lang] && DICTS[lang][key]) || (DICTS.ko && DICTS.ko[key]) || '';
        el.setAttribute('placeholder', val);
      });
      // Persist
      try { localStorage.setItem('lang', lang); } catch (_) {}
      // Update <title>
      document.title = i18nStr('site_title');
      // Update select value
      const sel = document.getElementById('langSelect');
      if (sel) sel.value = lang;

      updatePosters(lang);
    }

    // Init lang from localStorage or <html lang>
    (function () {
      const saved = (() => { try { return localStorage.getItem('lang'); } catch (_) { return null; } })();
      const initial = saved || document.documentElement.lang || 'ko';
      applyI18n(initial);
      const sel = document.getElementById('langSelect');
      sel?.addEventListener('change', (e) => applyI18n(e.target.value));
    })();


  </script>
</body>
</html>








